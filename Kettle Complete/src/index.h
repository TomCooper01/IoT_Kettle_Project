#include <Arduino.h>

const char WIFISETUP[] PROGMEM = R"=====(
<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="utf-8"><title>IOT Kettle - WiFi Setup</title><script type="text/javascript">var connection=new WebSocket('ws://' + location.hostname + ':81/', ['arduino']);connection.onopen=function(){connection.send('Connect ' + new Date());connection.send("WIFI");};connection.onerror=function(error){console.log('WebSocket Error ', error);};connection.onmessage=function(e){formSetup(e.data);};connection.onclose=function(){console.log('WebSocket connection closed');};function formSetup(e){const messageSplit=e.split(",");if (messageSplit[0]=="NETWORKS"){document.getElementById("WiFiNetwork").innerHTML="";var wifiSelect=document.createElement("SELECT");wifiSelect.id="WiFiSelect";for (var i=1; i < messageSplit.length; i++){var option=document.createElement("option");option.value=messageSplit[i];if (i==1) option.selected="selected";option.innerHTML=messageSplit[i];wifiSelect.appendChild(option);}document.getElementById("WiFiNetwork").appendChild(wifiSelect);var break0=document.createElement("BR");document.getElementById("WiFiNetwork").appendChild(break0);var passwordFeild=document.createElement("input");passwordFeild.type="password";passwordFeild.id="WiFiPassword";document.getElementById("WiFiNetwork").appendChild(passwordFeild);var break1=document.createElement("BR");document.getElementById("WiFiNetwork").appendChild(break1);var btn=document.createElement("BUTTON");btn.innerHTML="Connect";btn.onclick=function(){connection.send("AccessPointName," + document.getElementById("WiFiSelect").value);connection.send("AccessPointPassword," + document.getElementById("WiFiPassword").value);};document.getElementById("WiFiNetwork").appendChild(btn); var brn1=document.createElement("BUTTON");brn1.innerHTML="REFRESH";brn1.onclick=function(){connection.send("RESET");};document.getElementById("WiFiNetwork").appendChild(brn1);}else if (messageSplit[0]=="Connected"){console.log("Connection Established");}else{console.log(messageSplit);}}</script></head><body><center><div id="WiFiNetwork"></div></center></body></html>
)=====";

const char MAIN[] PROGMEM = R"=====(
<!DOCTYPE html><html lang="en" dir="ltr"><head> <meta charset="utf-8"> <title>IOT Kettle - Home</title> <script type="text/javascript">var connection=new WebSocket('ws://' + location.hostname + ':81/', ['arduino']); connection.onopen=function (){connection.send('Connect ' + new Date());}; connection.onerror=function (error){console.log('WebSocket Error ', error);}; connection.onmessage=function (e){e.data;}; connection.onclose=function (){console.log('WebSocket connection closed');}; function switch(){connection.send("SWITCH");}</script></head><body> <p>I am on WIFI</p><br><button onclick="switch()">Switch</button> <p id="KettleOutput"></p></body></html>
)=====";

const char DEBUGPAGE[] PROGMEM = R"=====(
<!DOCTYPE html><html lang="en" dir="ltr"><head> <style>body{background-color: lightblue;}div{background-color: grey; border-style: solid; margin: 100px;}p{background-color: white; border-style: dotted; margin: auto; width: 300px;}</style> <meta charset="utf-8"> <title>IOT Kettle - DEBUG PAGE</title> <script type="text/javascript">var connection=new WebSocket('ws://' + location.hostname + ':81/', ['arduino']); connection.onopen=function (){connection.send('Connect ' + new Date()); connection.send("DEBUG");}; connection.onerror=function (error){console.log('WebSocket Error ', error);}; connection.onmessage=function (e){const messageSplit=e.split(","); if(messageSplit[0]=="DEBUG"){switch(messageSplit[1]){case "STATE": document.getElementById("kettleState").innerHTML=""; var kettleStateParagraph=document.createElement("P"); kettleStateParagraph.innerText="Current Kettle State: " + messageSplit[2]; document.getElementById("kettleState").appendChild(kettleStateParagraph); break; case "SENSORS": switch(messageSplit[2]){case "KETTLESWITCH": document.getElementById("KETTLESWITCH").innerHTML=""; var kettleSwitchPara=document.createElement("P"); kettleSwitchPara.innerText="Current Kettle Switch State: " + messageSplit[3]; document.getElementById("KETTLESWITCH").appendChild(kettleSwitchPara); break; case "MUGSWITCH": document.getElementById("MUGSWITCH").innerHTML=""; var mugSwitchPara=document.createElement("P"); mugSwitchPara.innerText="Current Mug Switch State: " + messageSplit[3]; document.getElementById("MUGSWITCH").appendChild(mugSwitchPara); break; case "WATERSWITCH": document.getElementById("WATERSWITCH").innerHTML=""; var waterSwitchPara=document.createElement("P"); mugSwitchPara.innerText="Current Water Switch State: " + messageSplit[3]; document.getElementById("WATERSWITCH").appendChild(mugSwitchPara); break; case "THERMISTOR": document.getElementById("THERMISTOR").innerHTML=""; var thermistorPara=document.createElement("P"); thermistorPara.innerText="Current Kettle Temprature: " + messageSplit[3]; document.getElementById("THERMISTOR").appendChild(thermistorPara); break; case "RELAY": document.getElementById("RELAY").innerHTML=""; var relayPara=document.createElement("P"); relayPara.innerText="Current Relay State: " + messageSplit[3]; document.getElementById("RELAY").appendChild(relayPara); break; default: console.log(e.data);}break; case "WIFI": if(messageSplit[3]=="SETUP"){document.getElementById("WIFI").innerHTML=""; var setupPara=document.createElement("P"); setupPara.innerText="Kettle currently in Setup Mode..."; document.getElementById("RELAY").appendChild(setupPara);}else if(messageSplit[3]=="CONNECTED"){document.getElementById("WIFI").innerHTML=""; var relayPara=document.createElement("P"); relayPara.innerText="Kettle connected to " + messageSplit[3]; document.getElementById("RELAY").appendChild(relayPara);}else{console.log(e.data);}break; default: console.log(e.data);}}}; connection.onclose=function (){console.log('WebSocket connection closed');}; </script></head><body> <div id="main"> <div id="kettleState"></div><div id="sensorOutput"> <div id="KETTLESWITCH"></div><div id="MUGSWITCH"></div><div id="WATERSWITCH"></div><div id="THERMISTOR"></div><div id="RELAY"></div></div><div id="WIFI"></div></div></body></html>
)=====";